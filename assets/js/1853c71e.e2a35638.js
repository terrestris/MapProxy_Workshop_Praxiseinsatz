"use strict";(self.webpackChunkmapproxy_ws=self.webpackChunkmapproxy_ws||[]).push([[457],{3905:(e,n,r)=>{r.d(n,{Zo:()=>u,kt:()=>g});var t=r(7294);function a(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function s(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function i(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?s(Object(r),!0).forEach((function(n){a(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function p(e,n){if(null==e)return{};var r,t,a=function(e,n){if(null==e)return{};var r,t,a={},s=Object.keys(e);for(t=0;t<s.length;t++)r=s[t],n.indexOf(r)>=0||(a[r]=e[r]);return a}(e,n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(t=0;t<s.length;t++)r=s[t],n.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var l=t.createContext({}),o=function(e){var n=t.useContext(l),r=n;return e&&(r="function"==typeof e?e(n):i(i({},n),e)),r},u=function(e){var n=o(e.components);return t.createElement(l.Provider,{value:n},e.children)},d="mdxType",m={inlineCode:"code",wrapper:function(e){var n=e.children;return t.createElement(t.Fragment,{},n)}},c=t.forwardRef((function(e,n){var r=e.components,a=e.mdxType,s=e.originalType,l=e.parentName,u=p(e,["components","mdxType","originalType","parentName"]),d=o(r),c=a,g=d["".concat(l,".").concat(c)]||d[c]||m[c]||s;return r?t.createElement(g,i(i({ref:n},u),{},{components:r})):t.createElement(g,i({ref:n},u))}));function g(e,n){var r=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var s=r.length,i=new Array(s);i[0]=c;var p={};for(var l in n)hasOwnProperty.call(n,l)&&(p[l]=n[l]);p.originalType=e,p[d]="string"==typeof e?e:a,i[1]=p;for(var o=2;o<s;o++)i[o]=r[o];return t.createElement.apply(null,i)}return t.createElement.apply(null,r)}c.displayName="MDXCreateElement"},4686:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>l,contentTitle:()=>i,default:()=>m,frontMatter:()=>s,metadata:()=>p,toc:()=>o});var t=r(7462),a=(r(7294),r(3905));const s={},i="Sources",p={unversionedId:"exercises/sources",id:"exercises/sources",title:"Sources",description:"Aufgabe 1",source:"@site/docs/exercises/02-sources.md",sourceDirName:"exercises",slug:"/exercises/sources",permalink:"/MapProxy_Workshop_Praxiseinsatz/docs/exercises/sources",draft:!1,tags:[],version:"current",sidebarPosition:2,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Setup",permalink:"/MapProxy_Workshop_Praxiseinsatz/docs/exercises/setup"},next:{title:"Caches",permalink:"/MapProxy_Workshop_Praxiseinsatz/docs/exercises/caches"}},l={},o=[{value:"Aufgabe 1",id:"aufgabe-1",level:2},{value:"Aufgabe 2",id:"aufgabe-2",level:2},{value:"Aufgabe 3",id:"aufgabe-3",level:2},{value:"Aufgabe 4",id:"aufgabe-4",level:2},{value:"Aufgabe 5",id:"aufgabe-5",level:2},{value:"Bonus \ud83c\udf81",id:"bonus-",level:2},{value:"Aufgabe 6",id:"aufgabe-6",level:2},{value:"Aufgabe 7",id:"aufgabe-7",level:2}],u={toc:o},d="wrapper";function m(e){let{components:n,...r}=e;return(0,a.kt)(d,(0,t.Z)({},u,r,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"sources"},"Sources"),(0,a.kt)("h2",{id:"aufgabe-1"},"Aufgabe 1"),(0,a.kt)("p",null,"F\xfcgen Sie eine neue Source mit deutschlandweiter Abdeckung hinzu, beispielsweise den ",(0,a.kt)("a",{parentName:"p",href:"https://basemap.de/web_raster/"},"BaseMapDE Dienst")," der Adv (Arbeitsgemeinschaft der Vermessungsverwaltungen der L\xe4nder der Bundesrepublik Deutschland) mit der URL: ",(0,a.kt)("inlineCode",{parentName:"p"},"https://sgx.geodatenzentrum.de/wms_basemapde"),(0,a.kt)("br",{parentName:"p"}),"\n","Dies ist die Basis-URL des Dienstes, ohne Request-Parameter. Diese werden automatisch von MapProxy hinzugef\xfcgt. Neben der URL ist der Name des Layers ein verpflichtender Parameter. Ansonsten wei\xdf MapProxy nicht, welcher Layer abgefragt werden soll. Es soll der Layer ",(0,a.kt)("inlineCode",{parentName:"p"},"de_basemapde_web_raster_farbe")," verwendet werden."),(0,a.kt)("details",null,(0,a.kt)("summary",null,"L\xf6sung"),(0,a.kt)("p",null,(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},"sources:\n  basemap_de_source:\n    type: wms\n    req:\n      url: https://sgx.geodatenzentrum.de/wms_basemapde\n      layers: de_basemapde_web_raster_farbe\n")))),(0,a.kt)("h2",{id:"aufgabe-2"},"Aufgabe 2"),(0,a.kt)("p",null,"Definieren Sie anschlie\xdfend einen Layer, der sich aus dieser neuen Source speist. Es soll hier kein Cache verwendet werden, sondern direkt die Source abgesprochen werden. Betrachten Sie anschlie\xdfend den neuen Layer in der MapProxy Demo (der Demo-Server startet automatisch neu, sobald \xc4nderungen an der Konfiguration vorgenommen werden)."),(0,a.kt)("details",null,(0,a.kt)("summary",null,"L\xf6sung"),(0,a.kt)("p",null,(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},"layers:\n  - name: basemap_de\n    title: Basemap DE\n    sources: [basemap_de_source]\n")))),(0,a.kt)("h2",{id:"aufgabe-3"},"Aufgabe 3"),(0,a.kt)("p",null,"Stellen Sie die WMS-Version der neuen Source auf 1.3.0 und aktivieren Sie ",(0,a.kt)("inlineCode",{parentName:"p"},"legendgraphic")," Option. Laden Sie den Layer in QGIS und \xfcberpr\xfcfen Sie die GetLegendGraphic Function."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Tipp:")," ",(0,a.kt)("a",{parentName:"p",href:"https://mapproxy.github.io/mapproxy/latest/sources.html#wms-opts"},"https://mapproxy.github.io/mapproxy/latest/sources.html#wms-opts")),(0,a.kt)("details",null,(0,a.kt)("summary",null,"L\xf6sung"),(0,a.kt)("p",null,(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},"  basemap_de_source:\n    type: wms\n    req:\n      url: https://sgx.geodatenzentrum.de/wms_basemapde\n      layers: de_basemapde_web_raster_farbe\n    wms_opts:\n      version: 1.3.0\n      legendgraphic: true\n")))),(0,a.kt)("h2",{id:"aufgabe-4"},"Aufgabe 4"),(0,a.kt)("p",null,"F\xfcgen Sie eine weitere Source und einen entsprechenden Layer f\xfcr den DOP 20 Dienst Hamburgs hinzu.",(0,a.kt)("br",{parentName:"p"}),"\n","URL: ",(0,a.kt)("a",{parentName:"p",href:"https://geodienste.hamburg.de/HH_WMS_DOP"},"https://geodienste.hamburg.de/HH_WMS_DOP"),"\nLayer: ",(0,a.kt)("inlineCode",{parentName:"p"},"dop_rgb_0_5000"),(0,a.kt)("br",{parentName:"p"}),"\n","Der Layer soll ebenso in der Version 1.3.0 angefragt werden und zudem mit transparenten Kacheln."),(0,a.kt)("h2",{id:"aufgabe-5"},"Aufgabe 5"),(0,a.kt)("p",null,"Definieren Sie eine weitere WMS Source mit den Namen ",(0,a.kt)("inlineCode",{parentName:"p"},"ortsteile"),":",(0,a.kt)("br",{parentName:"p"}),"\n","URL: ",(0,a.kt)("inlineCode",{parentName:"p"},"https://geodienste.hamburg.de/HH_WMS_Sturmflut"),(0,a.kt)("br",{parentName:"p"}),"\n","Layer: ",(0,a.kt)("inlineCode",{parentName:"p"},"ueberschwemmung_1962"),(0,a.kt)("br",{parentName:"p"}),"\n","Transparent, Version 1.3.0"),(0,a.kt)("h2",{id:"bonus-"},"Bonus \ud83c\udf81"),(0,a.kt)("h2",{id:"aufgabe-6"},"Aufgabe 6"),(0,a.kt)("p",null,"Beide Layer sollen nur f\xfcr den Hamburger S\xfcden abgefragt werden. Hierf\xfcr muss eine Coverage definiert werden.\nHier f\xfchren mehrere Wege zum Ziel! Am einfachsten ist die Angabe einer Bounding Box, m\xf6glich ist aber auch die Angabe des Coverages durch externe Geodaten (Shape, GeoJSON, PostGIS) oder simple WKT-Dateien (siehe: ",(0,a.kt)("a",{parentName:"p",href:"https://mapproxy.github.io/mapproxy/latest/coverages.html#coverages"},"https://mapproxy.github.io/mapproxy/latest/coverages.html#coverages"),")"),(0,a.kt)("p",null,"Wechseln Sie ins Terminal, stoppen Sie den MapProxy Demo Server (Strg+C) und laden Sie mit folgendem Befehl die Statistischen Gebiete Hamburgs herunter (Quelle: ",(0,a.kt)("a",{parentName:"p",href:"https://api.hamburg.de/datasets/v1/statistische_gebiete"},"https://api.hamburg.de/datasets/v1/statistische_gebiete"),":",(0,a.kt)("br",{parentName:"p"}),"\n",(0,a.kt)("inlineCode",{parentName:"p"},"wget https://api.hamburg.de/datasets/v1/statistische_gebiete/collections/statistische_gebiete/items?bbox=9.8123%2C53.4142%2C10.1045%2C53.5396&limit=200&f=json -O hh_s\xfcd.geojson")),(0,a.kt)("p",null,"Verwenden Sie das heruntergeladene ",(0,a.kt)("inlineCode",{parentName:"p"},"geojson"),", um die Coverage f\xfcr beide Sourcen zu definieren.",(0,a.kt)("br",{parentName:"p"}),"\n","Vergessen Sie nicht, den MapProxy Demo Server wieder zu starten."),(0,a.kt)("details",null,(0,a.kt)("summary",null,"L\xf6sung (f\xfcr eine source)"),(0,a.kt)("p",null,(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},"  dop20_source:\n    type: wms\n    req:\n      url: https://geodienste.hamburg.de/HH_WMS_DOP\n      layers: dop_rgb_0_5000\n      transparent: true\n    wms_opts:\n      version: 1.3.0\n    coverage:\n      datasource: ./hh_s\xfcd.geojson\n      srs: EPSG:4326\n")))),(0,a.kt)("h2",{id:"aufgabe-7"},"Aufgabe 7"),(0,a.kt)("p",null,"Standardm\xe4\xdfig liefert MapProxy folgende EPSG-Codes aus:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"<CRS>EPSG:4258</CRS>\n<CRS>EPSG:3857</CRS>\n<CRS>EPSG:4326</CRS>\n<CRS>EPSG:900913</CRS>\n<CRS>CRS:84</CRS>\n")),(0,a.kt)("p",null,"Dies kann den Capabilities-Dokument entnommen werden: http://localhost:8080/service?REQUEST=GetCapabilities."),(0,a.kt)("p",null,"\xc4ndern Sie die Konfiguration f\xfcr den WMS-Endpunkt: Der Dienst soll nur in ",(0,a.kt)("inlineCode",{parentName:"p"},"EPSG:25833")," ausgeliefert werden."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Tipp:")," ",(0,a.kt)("a",{parentName:"p",href:"https://mapproxy.github.io/mapproxy/latest/services.html#srs"},"https://mapproxy.github.io/mapproxy/latest/services.html#srs")),(0,a.kt)("details",null,(0,a.kt)("summary",null,"L\xf6sung"),(0,a.kt)("p",null,(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},"services:\n  demo:\n  wms:\n    srs: ['EPSG:25833']\n    md:\n      title: MapProxy WMS Proxy\n      abstract: This is a minimal MapProxy example.\n")))),(0,a.kt)("h1",{id:"aufgabe-8"},"Aufgabe 8"),(0,a.kt)("p",null,"Beide Sourcen sollen nur in ",(0,a.kt)("inlineCode",{parentName:"p"},"EPSG:25833")," angefragt werden."),(0,a.kt)("details",null,(0,a.kt)("summary",null,"L\xf6sung"),(0,a.kt)("p",null,(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},"sources:\n  basemap_de_source:\n    type: wms\n    req:\n      url: https://sgx.geodatenzentrum.de/wms_basemapde\n      layers: de_basemapde_web_raster_farbe\n    supported_srs: ['EPSG:25833']\n    wms_opts:\n      version: 1.3.0\n      legendgraphic: true\n    coverage:\n      datasource: ./berlin_bezirke.geojson\n      srs: EPSG:4326\n")))))}m.isMDXComponent=!0}}]);